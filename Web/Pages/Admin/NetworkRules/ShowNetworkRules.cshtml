@page "/show-network-rules"
@model ShowNetworkRulesModel
@{
}

@section Meta {
    <title>
        Brandvägg -
        @(Branding.WebsiteTitle)
    </title>
}

@section Header {
    <partial name="_Navbar" model="Model.UserToken" />
}

<main>

    <h4>
        Brandvägg
    </h4>

    <div class="notice">
        <ul>
            @if (Model.IpFilterConfiguration.IsFiltering)
            {
                <li>✅ Aktiv</li>
            }
            else
            {
                <li>⚠️ Deaktiverad</li>
            }
        </ul>
    </div>

    <figure>
        <table>
            <tr>
                <th>Aktiv</th>
                <th>Nätverk</th>
                <th>Blockera</th>
                <th>Logga</th>
                <th>Anteckning</th>
            </tr>
            @foreach (var rule in Model.NetworkRules)
            {
                <tr>
                    <td>
                        @if (rule.Active)
                        {
                            <span>✅</span>
                        }
                        else
                        {
                            <span>⏸️</span>
                        }
                    </td>
                    <td>
                        <a href="/show-network-rule/@(rule.Id)">
                            @(rule.NetworkCidr)
                        </a>
                    </td>
                    <td>
                        @if (rule.Block)
                        {
                            <span>⛔ Blockera</span>
                        }
                        else
                        {
                            <span>💚 Tillåt</span>
                        }
                    </td>
                    <td>
                        @if (rule.Log)
                        {
                            <span>✍️ Logga</span>
                        }
                        else
                        {
                            <span>❌ Logga inte</span>
                        }
                    </td>
                    <td>
                        <span>@(rule.Description ?? "–")</span>
                    </td>
                </tr>
            }
            @if (!Model.NetworkRules.Any())
            {
                <tr>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
            }
        </table>
    </figure>

    <p>
        <a class="button" href="/add-network-rule">
            Lägg till adress
        </a>
    </p>

</main>
